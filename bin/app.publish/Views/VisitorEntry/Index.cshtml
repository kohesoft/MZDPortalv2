@model IEnumerable<MZDNETWORK.Models.VisitorEntry>
@{
    ViewBag.Title = "Ziyaretçi Formu";
}
<head>
    <link rel="stylesheet" href="~/Content/tailwind.min.css" />
    <link href='~/Content/boxicons.min.css' rel='stylesheet'>
</head>
<section class="min-h-screen flex justify-center bg-gray-50">
    <div class="w-full max-w-6xl">
        <div class="bg-white/90 shadow-2xl rounded-2xl border border-gray-200">
            <div class="px-8 py-6 border-b border-gray-100 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                <h3 class="text-2xl font-bold text-gray-800">Ziyaretçi/Giriş-Çıkış Formu</h3>
                <div class="flex flex-col md:flex-row md:items-center gap-2">
                    <a href="@Url.Action("Create","VisitorEntry")" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow flex items-center gap-2">
                        <i class='bx bx-plus'></i>Yeni Kayıt
                    </a>
                </div>
            </div>
            <div class="px-8 py-6 overflow-x-auto" style="max-height: 550px;">
                <table class="min-w-full bg-white rounded-lg shadow-sm" id="entryTable">
                    <thead class="sticky top-0 z-10 bg-white">
                        <tr>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 uppercase">Sıra</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 uppercase">Tarih</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 uppercase">Ad Soyad</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 uppercase">Organizasyon</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 uppercase">Görevi</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 uppercase">Kimlik No</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 uppercase">TC Kimlik</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 uppercase">Giriş</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 uppercase">Çıkış</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 uppercase">İmza</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{int i=1;}
                        @foreach(var item in Model){
                            <tr class="border-b last:border-b-0 hover:bg-indigo-50 transition">
                                <td class="px-4 py-2">@i</td>
                                <td class="px-4 py-2">@item.Date.ToString("dd.MM.yyyy")</td>
                                <td class="px-4 py-2">@item.FullName</td>
                                <td class="px-4 py-2">@item.Organization</td>
                                <td class="px-4 py-2">@item.Duty</td>
                                <td class="px-4 py-2">@item.IdentityNo</td>
                                <td class="px-4 py-2">@item.TCKimlik</td>
                                <td class="px-4 py-2">@(item.EntryTime.ToString(@"hh\:mm"))</td>
                                <td class="px-4 py-2">
                                    @if(item.ExitTime == null){
                                        using (Html.BeginForm("SetExit","VisitorEntry", FormMethod.Post, new { @class="inline" })){
                                            @Html.AntiForgeryToken()
                                            @Html.Hidden("id", item.Id)
                                            <button type="submit" class="bg-red-600 hover:bg-red-700 text-white text-xs font-semibold py-1 px-3 rounded">Çıkış Kaydet</button>
                                        }
                                    }else{
                                        @(item.ExitTime?.ToString(@"hh\:mm"))
                                    }
                                </td>
                                <td class="px-4 py-2">
                                    @if(!string.IsNullOrEmpty(item.SignaturePath)){
                                        <img src="@item.SignaturePath" class="h-12 inline-block" />
                                    }
                                </td>
                            </tr>
                            i++;
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section> 