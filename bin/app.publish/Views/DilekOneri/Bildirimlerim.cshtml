@using MZDNETWORK.Models
@using System.Linq
@model IEnumerable<DilekOneri>

@{
    var currentUsername = User.Identity.Name; // Oturum açmış kullanıcının kullanıcı adını al
    var filteredModel = Model.Where(item => item.Username == currentUsername).ToList(); // Modeli filtrele ve listeye dönüştür
}

<head>
    <link rel="stylesheet" href="~/Content/all.min.css" />
    <link rel="stylesheet" href="~/Content/DilekIstek.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8" />
</head>

<div class="container" style="max-width:100%; max-height:100%;">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Yanıtlanmış Mesajlar</h3>
        </div>
        <div class="card-body">
            <div class="table-responsive" style="max-height: 550px; overflow-y: auto;">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th style="width:90%">Mesajım ve IK Yanıt</th>
                            <th>Tarih</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in filteredModel)
                        {
                            <tr>
                                <td style="width:70%">
                                    <div class="mesaj">@item.Mesaj</div>
                                    <div class="yanit"><span style="font-family: monospace;">Insan Kaynakları: </span>@item.Bilidirim</div>
                                </td>
                                <td>@item.GonderimTarihi</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<style>
    .homev2 {
        position: relative; /* absolute yerine relative kullanıldı */
        top: 100px;
        left: 50px;
        min-height: 85vh; /* height yerine min-height kullanıldı */
        width: calc(94% - 250px);
        transition: var(--tran-05);
    }

    .mesaj {
        border: outset;
        border-color: #ffffff;
        border-radius: 10px;
        background-color: #d1e7ff; /* Açık mavi */
        font-size: 15px;
        font-family: monospace;
        float: right; /* Mesajları sağa hizala */
        clear: both; /* Her yeni mesajdan önce temizle */
        margin-bottom: 10px; /* Mesajlar arasında boşluk bırak */
        padding: 10px; /* Mesaj içeriği için padding ekle */
        max-width: 70%; /* Mesaj genişliğini sınırlamak için */
    }

    .yanit {
        border: outset;
        border-color: #ffffff;
        border-radius: 10px;
        background-color: #d4edda; /* Açık yeşil */
        font-size: 15px;
        font-family: monospace;
        float: left; /* Yanıtları sola hizala */
        clear: both; /* Her yeni yanıttan önce temizle */
        margin-bottom: 10px; /* Yanıtlar arasında boşluk bırak */
        padding: 10px; /* Yanıt içeriği için padding ekle */
        max-width: 70%; /* Yanıt genişliğini sınırlamak için */
    }
</style>
