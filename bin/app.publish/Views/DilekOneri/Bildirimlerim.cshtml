@using MZDNETWORK.Models
@using System.Linq
@model IEnumerable<DilekOneri>

@{
    var currentUsername = User.Identity.Name;
    var filteredModel = Model.Where(item => item.Username == currentUsername).ToList();
}

<head>
    <link rel="stylesheet" href="~/Content/all.min.css" />
    <link rel="stylesheet" href="~/Content/dilekIstek.css" />
    <link rel="stylesheet" href="~/Content/boxicons.min.css" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8" />
</head>

<div class="mesajlar-container" style="max-width:100%; max-height:100%;">
    <div class="mesajlar-card">
        <div class="mesajlar-card-header">
            <h3 class="mesajlar-card-title">
                <i class="bx bx-message-dots mesajlar-icon-message"></i>
                Yanıtlanmış Mesajlar
            </h3>
        </div>
        <div class="mesajlar-card-body">
            <div class="mesajlar-table-container">
                <table class="mesajlar-data-table">
                    <thead>
                        <tr>
                            <th class="mesajlar-th-content">Mesajım ve IK Yanıt</th>
                            <th class="mesajlar-th-date">Tarih</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in filteredModel)
                        {
                            <tr class="mesajlar-data-row">
                                <td class="mesajlar-content-cell">
                                    <div class="mesajlar-user-message">
                                        <div class="mesajlar-user-avatar">
                                            <i class="bx bx-user mesajlar-icon-user"></i>
                                        </div>
                                        <div class="mesajlar-message-content">
                                            <div class="mesajlar-message-text">@item.Mesaj</div>
                                        </div>
                                    </div>
                                    <div class="mesajlar-hr-divider"></div>
                                    <div class="mesajlar-hr-response">
                                        <div class="mesajlar-hr-avatar">
                                            <i class="bx bx-group mesajlar-icon-hr"></i>
                                        </div>
                                        <div class="mesajlar-response-content">
                                            <div class="mesajlar-response-header">İnsan Kaynakları</div>
                                            <div class="mesajlar-response-text">@item.Bilidirim</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="mesajlar-date-cell">
                                    <div class="mesajlar-date">
                                        <i class="bx bx-calendar mesajlar-icon-calendar"></i>
                                        @item.GonderimTarihi
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
