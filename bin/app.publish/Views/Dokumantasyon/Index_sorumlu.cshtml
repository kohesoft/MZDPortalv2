@model IEnumerable<MZDNETWORK.Models.Dokumantasyon>
@using MZDNETWORK.Models
@using System.Linq
@using System.Linq.Expressions;

@{
    var currentUsername = User.Identity.Name; // Oturum açmış kullanıcının kullanıcı adını al
    var filteredModel = Model.Where(item => item.Username == currentUsername).ToList(); // Modeli filtrele ve listeye dönüştür
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link rel="stylesheet" href="~/Content/all.min.css" />
    <link rel="stylesheet" href="~/Content/DilekIstek.css" />
    <meta charset="utf-8" />
   
    <style>
        .card-toolbar {
            display: flex;
            justify-content: flex-end;
        }

        .table {
            width: 100%; /* Tablo genişliğini ayarla */
            border-collapse: collapse;
            margin-bottom: 20px; /* Tablo altındaki aralık */
        }

            .table th, .table td {
                border: 1px solid #ddd;
                padding: 10px; /* Hücre içi aralık */
                text-align: left; /* Metin hizalaması */
            }

            .table th {
                background-color: #f2f2f2;
            }

            .table tr:nth-child(even) {
                background-color: #f9f9f9;
            }

            .table tr:hover {
                background-color: #f1f1f1;
            }

        .action-links a {
            margin-right: 10px;
            text-decoration: none;
            color: #007bff;
        }

            .action-links a:hover {
                text-decoration: underline;
            }
    </style>
</head>
<body>
    <div class="container" style="max-width:100%; max-height:100%;">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Stok Kartı Listesi</h3>
                <div class="card-toolbar">
                    <input type="text" id="searchInput" onkeyup="searchTable()" placeholder="Dokümantasyonları ara..." class="form-control" style="width: 300px;">
                    @Html.ActionLink("Stok Kartı Oluştur", "Create", null, new { @class = "btn btn-primary ml-2" })
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive" style="max-height: 550px; overflow-y: auto;">
                    <table class="table table-striped table-bordered table-hover" id="dokumantasyonTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Ad Soyad</th>
                                <th>Birim</th>
                                <th>Ünvan</th>
                                <th>Talep Tarih</th>
                                <th>Dokümantasyon Sorumlusu</th>
                                <th>Dokümantasyon Tarih</th>
                                <th>İşlemler</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>@Html.DisplayFor(modelItem => item.Id)</td>

                                    <td>@Html.DisplayFor(modelItem => item.TalepAdSoyad)</td>
                                    <td>@Html.DisplayFor(modelItem => item.TalepBirim)</td>
                                    <td>@Html.DisplayFor(modelItem => item.TalepUnvan)</td>
                                    <td>@Html.DisplayFor(modelItem => item.TalepTarihi)</td>
                                    <td>@Html.DisplayFor(modelItem => item.DokumantasyonSorumlu)</td>
                                    <td>@Html.DisplayFor(modelItem => item.DokumantasyonTarih)</td>
                                    <td class="action-links">
                                        <div> @Html.ActionLink("Düzenle", "Edit", new { id = item.Id }, new { @class = "btn btn-sm btn-warning" })</div>
                                        <div> @Html.ActionLink("Detay", "Details", new { id = item.Id }, new { @class = "btn btn-sm btn-info" })</div>
                                        <div>  @Html.ActionLink("Sil", "Delete", new { id = item.Id }, new { @class = "btn btn-sm btn-danger" })</div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <script>
        function searchTable() {
            var input, filter, table, tbody, tr, td, i, j, txtValue;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("dokumantasyonTable");
            tbody = table.getElementsByTagName("tbody")[0];
            tr = tbody.getElementsByTagName("tr");

            for (i = 0; i < tr.length; i++) {
                tr[i].style.display = "none";
                td = tr[i].getElementsByTagName("td");
                for (j = 0; j < td.length; j++) {
                    if (td[j]) {
                        txtValue = td[j].textContent || td[j].innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            tr[i].style.display = "";
                            break;
                        }
                    }
                }
            }
        }
    </script>
</body>
</html>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


<script>
    function searchTable() {
        var input, filter, table, tbody, tr, td, i, j, txtValue;
        input = document.getElementById("searchInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("dokumantasyonTable");
        tbody = table.getElementsByTagName("tbody")[0];
        tr = tbody.getElementsByTagName("tr");

        for (i = 0; i < tr.length; i++) {
            tr[i].style.display = "none";
            td = tr[i].getElementsByTagName("td");
            for (j = 0; j < td.length; j++) {
                if (td[j]) {
                    txtValue = td[j].textContent || td[j].innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                        break;
                    }
                }
            }
        }
    }</script>
</body>
</html>
