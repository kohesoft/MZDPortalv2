@model MZDNETWORK.Models.ChangePasswordViewModel

@{
    ViewBag.Title = "Şifre Değiştir";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="~/Content/boxicons.min.css" />
<style>
    :root {
        --primary-color:#4361ee;
        --primary-hover:#3a56d4;
    }
    .form-container{background:#fff;box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);border-radius:12px;position:relative;overflow:hidden;}
    .form-container::before{content:"";position:absolute;top:0;left:0;width:100%;height:5px;background:linear-gradient(90deg,var(--primary-color),#6979f8,#a5b4fc);}
    .lf--input{padding-left:44px;}
    .lf--label{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#6b7280;}
</style>

<div class="bg-gray-100 min-h-screen flex items-center justify-center py-10">
    <div class="w-full max-w-lg form-container p-10 pt-12">
        <h2 class="text-2xl font-semibold text-center text-gray-800 mb-8">Şifre Değiştir</h2>
        @if (TempData["SuccessMessage"] != null)
        {
            <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6 text-center" role="alert">
                <span>@TempData["SuccessMessage"]</span>
            </div>
            <script>setTimeout(function(){window.location.href='@TempData["RedirectUrl"]';},2000);</script>
        }

        @using (Html.BeginForm("ChangePassword","User",FormMethod.Post,new { @class="space-y-6"}))
        {
            @Html.AntiForgeryToken()
            if (!ViewData.ModelState.IsValid)
            {
                <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm">
                    @Html.ValidationSummary(true,"",new {@class="text-danger"})
                </div>
            }
            <div class="relative">
                <label class="lf--label" for="OldPassword"><i class='bx bx-lock-open'></i></label>
                @Html.PasswordFor(m=>m.OldPassword,new {@class="lf--input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder="Eski Şifre (ilk girişte boş)"})
                @Html.ValidationMessageFor(m=>m.OldPassword,"",new {@class="text-red-600 text-xs mt-1"})
            </div>
            <div class="relative">
                <label class="lf--label" for="NewPassword"><i class='bx bx-lock'></i></label>
                @Html.PasswordFor(m=>m.NewPassword,new {@class="lf--input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder="Yeni Şifre"})
                @Html.ValidationMessageFor(m=>m.NewPassword,"",new {@class="text-red-600 text-xs mt-1"})
            </div>
            <div class="relative">
                <label class="lf--label" for="ConfirmPassword"><i class='bx bx-lock'></i></label>
                @Html.PasswordFor(m=>m.ConfirmPassword,new {@class="lf--input w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder="Yeni Şifre Tekrar"})
                @Html.ValidationMessageFor(m=>m.ConfirmPassword,"",new {@class="text-red-600 text-xs mt-1"})
            </div>
            <button type="submit" class="w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium transition">Şifreyi Kaydet</button>
        }
    </div>
</div>
