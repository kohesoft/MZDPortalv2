@{
    ViewBag.Title = "Bildirim Gönder";
}

<h2 style="color:white;">Bildirim Gönder</h2>

<form id="notificationForm">
    <div class="form-group">
        <textarea id="message" class="form-control" placeholder="Mesajınızı girin" rows="5" cols="50"></textarea>
    </div>
    <button type="button" id="sendNotification" class="btn btn-primary">Gönder</button>
</form>

<!-- TinyMCE -->
<script src="~/Scripts/tinymce/tinymce.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        tinymce.init({
            selector: '#message',
            plugins: 'advlist autolink lists link image charmap print preview hr anchor pagebreak',
            toolbar_mode: 'floating',
        });
    });
</script>

<script src="~/Scripts/jquery.signalR-2.4.3.min.js"></script>
<script src="~/signalr/hubs"></script>
<script>
    $(document).ready(function () {
        var notificationHub = $.connection.notificationHub;

        $('#sendNotification').click(function () {
            var message = tinymce.get('message').getContent();
            notificationHub.server.sendNotification(message);
        });

        $.connection.hub.start().done(function () {
            console.log("SignalR bağlantısı kuruldu.");
        });
    });
</script>

<style>
    .form-group {
        margin-bottom: 15px;
    }

    .form-control {
        width: 100%;
        padding: 10px;
        margin: 5px 0 10px 0;
        display: inline-block;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }

    .btn {
        background-color: #4CAF50;
        color: white;
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

        .btn:hover {
            background-color: #45a049;
        }
</style>
